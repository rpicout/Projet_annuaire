<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head> 
	<title>Annuaire des établissements - Liste</title>
	<meta charset="utf-8"> 
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Lato|Montserrat|Raleway:300" rel="stylesheet"/>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

	<link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="script/listeJS.js"></script>
	
	<style>
		.fiche {
			width: 700px;
		}
		.fiche p {
			margin-left: 5px;
			margin-bottom: 4px;
			font-size: 13px;
		}
	</style>

  	<link rel="stylesheet" href="css/styleListe.css" type="text/css">
</head>
<body>
	<nav class="navbar navbar-default navbar-fixed-top">
	  <div class="container-fluid">
		<div class="navbar-header">
		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>                        
		  </button>
		  <!-- 
		  <a class="navbar-brand" href="#myPage">Logo</a>
		   -->
		</div>
		<div class="collapse navbar-collapse" id="myNavbar">
		  <ul class="nav navbar-nav navbar-left">
			<li><a href="/">HOME</a></li>
			<li><a href="/#projet">A PROPOS</a></li>
		  </ul>
		  <ul class="nav navbar-nav navbar-right">
			<li><a href="/listeDesEtablissements">LISTE DES ETABLISSEMENTS</a></li>
			<li><a href="/rechercheCodePostal">RECHERCHE PAR CODE POSTAL</a></li>
			<li><a href="/modifierEtablissement">MODIFIER UN ETABLISSEMENT</a></li>
		  </ul>
		</div>
	  </div>
	</nav>
	
	<div class="jumbotron">
		<h2>Liste des établissements</h2>
	</div>
	
	<div class="table-responsive" id="tableau">
		<table id="tableauEtablissement" class="table table-hover table-bordered" width=100%>
			<thead >
				<tr>
					<td></td>
					<td>ID</td>
					<td>NOM</td>
					<td>TYPE</td>
					<td>STATUT</td>
					<td>ADRESSE</td>
					<td>CODE POSTAL</td>
					<td>VILLE</td>
					<td>DEPARTEMENT</td>
					<td>REGION</td>
				</tr>
			</thead>
			<tbody>
				<tr id="ligne-tableau" th:each="etablissement : ${etablissements}">
					<th>
						<div class="dropdown">
						  	<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">+</button>
						  	<div class="dropdown-menu fiche" aria-labelledby="dropdownMenuButton">
							    <p>Identifiant : 
									<span th:text="${etablissement.identifiantdeletablissement}"></span>
								</p>
								<p>Nom :	 
									<span th:text="${etablissement.nometablissement}"></span>
								</p>
								<p>Type : 
									<span th:text="${etablissement.typeetablissement}"></span>
								</p>
								<p th:if="${etablissement.statutpublicprive} != '' and ${etablissement.statutpublicprive} != '-'">Statut : 
									<span th:text="${etablissement.statutpublicprive}"></span>
								</p>
								<p th:if="${etablissement.adresse1} != ''">Adresse1 : 
									<span th:text="${etablissement.adresse1}"></span>
								</p>
								<p th:if="${etablissement.adresse2} != ''">Adresse2 : 
									<span th:text="${etablissement.adresse2}"></span>
								</p>
								<p th:if="${etablissement.adresse3} != ''">Adresse3 : 
									<span th:text="${etablissement.adresse3}"></span>
								</p>
								<p>Code postal : 
									<span th:text="${etablissement.codepostal}"></span>
								</p>
								<p th:if="${etablissement.codecommune} != ''">Commune : 
									<span th:text="${etablissement.codecommune}"></span> 
									<span th:text="${etablissement.nomcommune}"></span>
								</p>
								<p>Département : 
									<span th:text="${etablissement.codedepartement}"></span> 
									<span th:text="${etablissement.libelledepartement}"></span>
								</p>
								<p>Région : 
									<span th:text="${etablissement.coderegion}"></span> 
									<span th:text="${etablissement.libelleregion}"></span>
								</p>
								<p>Code académie : 
									<span th:text="${etablissement.codeacademie}"></span> 
									<span th:text="${etablissement.libelleacademie}"></span>
								</p>
								<p>Ecole :
									<span th:if="${etablissement.ecolematernelle} == 1"> maternelle /</span>
									<span th:if="${etablissement.ecoleelementaire} == 1"> élémentaire</span>
								</p>
								<p th:if="${etablissement.voiegenerale} != '' and ${etablissement.voietechnologique} != '' and ${etablissement.voieprofessionnelle} != ''">Voie : 
									<span th:if="${etablissement.voiegenerale} == 1">générale / </span>
									<span th:if="${etablissement.voietechnologique} == 1">technologique / </span>
									<span th:if="${etablissement.voieprofessionnelle} == 1">professionnelle</span>
								</p>
								<p th:if="${etablissement.telephone} != ''">Téléphone : 
									<span th:text="${etablissement.telephone}"></span>
								</p>
								<p th:if="${etablissement.fax} != ''">Fax : 
									<span th:text="${etablissement.fax}"></span>
								</p>
								<p th:if="${etablissement.web} != ''">Web : 
									<span th:text="${etablissement.web}"></span>
								</p>
								<p th:if="${etablissement.mail} != ''">Mail : 
									<span th:text="${etablissement.mail}"></span>
								</p>
								<p th:if="${etablissement.restauration} != '' and ${etablissement.hebergement} != ''">Présence de : 
									<span th:if="${etablissement.restauration} == 1">restauration / </span>
									<span th:if="${etablissement.hebergement} == 1">hébergement</span>
								</p>
								<p th:if="${etablissement.ulis} != '' and ${etablissement.apprentissage} != '' and ${etablissement.segpa} != ''">Présence de classe : 
									<span th:if="${etablissement.ulis} == 1">ULIS / </span>
									<span th:if="${etablissement.apprentissage} == 1">apprentissage / </span>
									<span th:if="${etablissement.segpa} == 1">SEGPA</span>
								</p>
								<p th:if="${etablissement.sectionarts} != '' and ${etablissement.sectioncinema} != '' and ${etablissement.sectiontheatre} != '' and ${etablissement.sectionsport} != '' and ${etablissement.sectioninternationale} != '' and ${etablissement.sectioneuropeenne} != ''">Section : 
									<span th:if="${etablissement.sectionarts} == 1">arts / </span>
									<span th:if="${etablissement.sectioncinema} == 1">cinéma / </span>
									<span th:if="${etablissement.sectiontheatre} == 1">théâtre / </span>
									<span th:if="${etablissement.sectionsport} == 1">sport / </span>
									<span th:if="${etablissement.sectioninternationale} == 1">internationale / </span>
									<span th:if="${etablissement.sectioneuropeenne} == 1">européenne</span>
								</p>
								<p th:if="${etablissement.lyceeAgricole} != '' and ${etablissement.lyceemilitaire} != '' and ${etablissement.lyceedesmetiers} != ''">Lycée : 
									<span th:if="${etablissement.lyceeAgricole} == 1">agricole / </span>
									<span th:if="${etablissement.lyceemilitaire} == 1">militaire / </span>
									<span th:if="${etablissement.lyceedesmetiers} == 1">des métiers</span>
								</p>
								<p th:if="${etablissement.postBAC} == 1">Post BAC</p>
								<p th:if="${etablissement.appartenanceEducationPrioritaire} != ''">Appartenance éducation prioritaire : 
									<span th:text="${etablissement.appartenanceEducationPrioritaire}"></span>
								</p>
								<p th:if="${etablissement.greta} == 1">GRETA</p>
								<p th:if="${etablissement.sirenSIRET} != ''">Siren SIRET : 
									<span th:text="${etablissement.sirenSIRET}"></span>
								</p>
								<p th:if="${etablissement.nombredeleves} != ''">Nombre d'élèves : 
									<span th:text="${etablissement.nombredeleves}"></span>
								</p>
								<p th:if="${etablissement.ficheonisep} != ''">Fiche ONISEP : 
									<span th:text="${etablissement.ficheonisep}"></span>
								</p>
								<p th:if="${etablissement.typecontratprive} != ''">Type contrat privé : 
									<span th:text="${etablissement.typecontratprive}"></span>
								</p>
								<p>Coordonnées : (
									<span th:text="${etablissement.coordonneeX}"></span>; 
									<span th:text="${etablissement.coordonneeY}"></span>)
								</p>
								<p>EPSG : 
									<span th:text="${etablissement.epsg}"></span>
								</p>
								<p th:if="${etablissement.nomcirconscription} != ''">Nom circonscription : 
									<span th:text="${etablissement.nomcirconscription}"></span>
								</p>
								<p th:if="${etablissement.latitude} != ''">Latitude : 
									<span th:text="${etablissement.latitude}"></span>
								</p>
								<p th:if="${etablissement.longitude} != ''">Longitude : 
									<span th:text="${etablissement.longitude}"></span>
								</p>
								<p>Précision localisation : 
									<span th:text="${etablissement.precisionlocalisation}"></span>
								</p>
								<p>Date ouverture : 
									<span th:text="${etablissement.dateouverture}"></span>
								</p>
								<p>Date maj ligne : 
									<span th:text="${etablissement.datemajligne}"></span>
								</p>
								<p>Etat : 
									<span th:text="${etablissement.etat}"></span>
								</p>
								<p>Ministère tutelle : 
									<span th:text="${etablissement.ministeretutelle}"></span>
								</p>
								<p th:if="${etablissement.etablissementmultilignes} == 1">Etablissement multilignes</p>
								<p th:if="${etablissement.rpiconcentre} == 1">Rpi concentré</p>
								<p th:if="${etablissement.rpidisperse} != ''">Rpi dispersé : 
									<span th:text="${etablissement.rpidisperse}"></span>
								</p>
								<p>Code nature : 
									<span th:text="${etablissement.codenature}"></span>
								</p>
								<p>Libellé nature : 
									<span th:text="${etablissement.libellenature}"></span>
								</p>
						  </div>
						</div>
					</th>	
					<th th:text="${etablissement.identifiantdeletablissement}">id</th>
					<th th:text="${etablissement.nometablissement}">nom</th>
					<th th:text="${etablissement.typeetablissement}">type</th>
					<th th:text="${etablissement.statutpublicprive}">statut</th>
					<th th:text="${etablissement.adresse1}">adresse</th>
					<th th:text="${etablissement.codepostal}">code postal</th>
					<th th:text="${etablissement.libelleacademie}">académie</th>
					<th th:text="${etablissement.libelledepartement}">département</th>	
					<th th:text="${etablissement.libelleregion}">région</th>	
				</tr>
			</tbody>
		</table>	
	</div>
</body>
</html>
